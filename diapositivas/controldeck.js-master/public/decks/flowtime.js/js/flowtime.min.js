/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=function(){function n(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r)}else if(e.attachEvent){e.attachEvent(t,n)}}function r(e){return i(e)!=""}function i(n){for(var r=0;r<e.length;r++){var i=e[r].replace(/-/g,"");var s=n;if(i.length>0){s=s.charAt(0).toUpperCase()+s.substr(1)}s=i+s;if(s in t==true){return s}}return""}function s(e){return!!e&&Object.prototype.toString.call(e).match(/(\w+)\]/)[1]}function o(e,t){if(e.classList){e.classList.add(t)}else{if(a(e,t)==false){var n=e.className;if(n.length>0){n+=" "}e.className=n+t}}}function u(e,t){if(e.classList){e.classList.remove(t)}else{var n=e.className;if(n.indexOf(t)!=-1){if(n.indexOf(" "+t)!=-1){n=n.replace(" "+t,"")}else if(n.indexOf(t+" ")!=-1){n=n.replace(t+" ","")}else{n=n.replace(t,"")}}e.className=n}}function a(e,t){if(e.classList){return e.classList.contains(t)}else{return e.className.indexOf(t)!=-1}}function f(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(e,true,true);for(var r in t){n[r]=t[r]}document.dispatchEvent(n)}}function l(e,t){var n;var r;n=t.x-e.x;n*=n;r=t.y-e.y;r*=r;return Math.abs(Math.sqrt(n+r))}var e=["","-webkit-","-moz-","-ms-","-o-"];var t;if(window.getComputedStyle){t=window.getComputedStyle(document.body)}else{t=document.documentElement.style}return{addListener:n,dispatchEvent:f,testCSS:r,getPrefixed:i,typeOf:s,addClass:o,removeClass:u,hasClass:a,distance:l}}();
/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012 Marco Lago, http://marcolago.com
 */
 var Flowtime=function(){function U(e){var t=e.target.getAttribute("href");if(t&&t.substr(0,1)=="#"){e.target.blur();e.preventDefault();var n=t;var r=R.setPage(n);et(r,true,true)}if(S&&Brav1Toolbox.hasClass(e.target,i)){et(e.target,null,true)}if(Brav1Toolbox.hasClass(e.target,d)){var s=Number(Z(e.target.getAttribute("data-section")));var o=Number(Z(e.target.getAttribute("data-page")));St(s,o)}}function z(e){b=false;var t;if(e.state){t=e.state.token.replace("#/","")}else{t=document.location.hash.replace("#/","")}var n=R.setPage(t);et(n,false)}function W(e,t){if(b||t){var n=document.location.hash.replace("#/","");var r=R.setPage(n);et(r,false)}}function V(t){if(!e){t.preventDefault();it()}else if(e){if(X==true){var n={x:window.pageXOffset,y:window.pageYOffset};var r;var i;var s=R.getAllPages();for(var o=0;o<s.length;o++){var u={x:s[o].x,y:s[o].y};if(o==0){r=s[o];i=Brav1Toolbox.distance(n,u)}else{if(Brav1Toolbox.distance(n,u)<i){r=s[o];i=Brav1Toolbox.distance(n,u)}}}X=false;window.scrollTo(r.x,r.y)}else{X=true}}}function J(e){if(e.length>0){var t=e.replace("#/","").split("/");var n=document.querySelector(r+"[data-id=__"+t[0]+"]")||document.querySelector(r+"[data-prog=__"+t[0]+"]");if(n!=null){var i=null;if(t.length>1){i=n.querySelector(s+"[data-id=__"+t[1]+"]")||n.querySelector(s+"[data-prog=__"+t[1]+"]")}if(i==null){i=n.querySelector(s)}return i}}return}function K(){R.update();W(null,true)}function Q(e){var t=x;var n=R.getCurrentPage().getAttribute("data-title");if(n==null){var r=e.split("/");for(var i=0;i<r.length;i++){t+=" | "+r[i]}}else{if(R.getCurrentSection().getAttribute("data-title")!=null){t+=" | "+R.getCurrentSection().getAttribute("data-title")}t+=" | "+n}document.title=t}function G(e){return e.getAttribute("data-id")!=null?e.getAttribute("data-id").replace(/__/,""):e.getAttribute("data-prog").replace(/__/,"")}function Y(e){if(e.substr(0,2)!="__"){return"__"+e}else{return e}}function Z(e){if(e.substr(0,2)=="__"){return e.replace(/__/,"")}else{return e}}function et(e,n,r){n=n==false?n:true;if(!e){if(R.getCurrentPage()!=null){e=R.getCurrentPage()}else{e=document.querySelector(s)}n=true}nt(e);rt(e);if(S){lt(false,false)}var i=R.getHash(e);if(r==true){R.updateFragments()}var o=R.getPageIndex(e);if(E.section!=o.section||E.page!=o.page){if(t!=null&&n!=false&&R.getCurrentFragmentIndex()==-1){var u={token:i};var a="#/"+i;w=a;window.history.pushState(u,null,w)}else{document.location.hash="/"+i}}Q(i);tt();E=o;R.switchActivePage(e,true);if(D){at()}}function tt(){var e=R.getPageIndex();Brav1Toolbox.dispatchEvent(m,{section:R.getCurrentSection(),page:R.getCurrentPage(),sectionIndex:e.section,pageIndex:e.page,pastSectionIndex:E.section,pastPageIndex:E.page,prevSection:R.hasPrevSection(),nextSection:R.hasNextSection(),prevPage:R.hasPrevPage(),nextPage:R.hasNextPage(),fragment:R.getCurrentFragment(),fragmentIndex:R.getCurrentFragmentIndex(),isOverview:S,progress:R.getProgress(),total:R.getPagesTotalLength()})}function nt(e){var t;var n;var r=R.getPageIndex(e);if(A==true){t=e.x;n=e.y}else{t=r.section;n=r.page}if(Brav1Toolbox.testCSS("transform")){if(A){g.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+ -t+"px) translateY("+ -n+"px)"}else{g.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+ -t*100+"%) translateY("+ -n*100+"%)"}}else{if(A){g.style.top=-n+"px";g.style.left=-t+"px"}else{g.style.top=-n*100+"%";g.style.left=-t*100+"%"}}it()}function rt(e){if(j){var t=R.getPageIndex(e);var n=R.getParallaxElements();for(var r=0;r<n.length;r++){var i=n[r];if(i!=undefined){for(var s=0;s<i.length;s++){var o=i[s];if(o!=undefined){for(var u=0;u<o.length;u++){var a=o[u];var f=0;var l=0;if(t.section<r){f=a.pX}else if(t.section>r){f=-a.pX}if(t.page<s){l=a.pY}else if(t.page>s){l=-a.pY}if(P){a.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+f+"px) translateY("+l+"px)"}else{a.style[Brav1Toolbox.getPrefixed("transform")]="translateX("+f+"%) translateY("+l+"%)"}}}}}}}}function it(){if(!e){window.scrollTo(0,0)}}function ot(){var e=document.createDocumentFragment();C=document.createElement("div");C.className=l;e.appendChild(C);for(var t=0;t<R.getSectionsLength();t++){var n=document.createElement("div");n.setAttribute("data-section","__"+t);n.className=h;Brav1Toolbox.addClass(n,"thumb-section-"+t);var r=R.getPages(t);for(var i=0;i<r.length;i++){var s=document.createElement("div");s.className=d;s.setAttribute("data-section","__"+t);s.setAttribute("data-page","__"+i);Brav1Toolbox.addClass(s,"thumb-page-"+i);n.appendChild(s)}C.appendChild(n)}y.appendChild(C)}function ut(){if(C!=null){y.removeChild(C);C=null}}function at(){if(C!=null){var e=C.querySelectorAll(v);for(var t=0;t<e.length;t++){var n=e[t];var r=Number(Z(n.getAttribute("data-section")));var i=Number(Z(n.getAttribute("data-page")));if(r==R.getPageIndex().section&&i==R.getPageIndex().page){Brav1Toolbox.addClass(e[t],"actual")}else{Brav1Toolbox.removeClass(e[t],"actual")}}}}function ft(){return C}function lt(e,t){if(S){ct(e,t)}else{T=R.getCurrentPage();ht()}}function ct(e,t){S=false;Brav1Toolbox.removeClass(y,"ft-overview");R.hideFragments();t=t===false?false:true;if(t==true){if(e==true){et(T)}else{et()}}}function ht(){S=true;Brav1Toolbox.addClass(y,"ft-overview");R.showFragments();if(M==false){pt(true)}else{dt(true)}tt()}function pt(e){if(e){var t=100/R.getSectionsLength();var n=100/R.getPagesLength();var r=Math.min(t,n)*.9;var i=(100-R.getSectionsLength()*r)/2;var s=(100-R.getPagesLength()*r)/2;g.style[Brav1Toolbox.getPrefixed("transform")]="translate("+i+"%, "+s+"%) scale("+r/100+", "+r/100+")"}}function dt(e){if(e){var t=N;var n=R.getPageIndex();var r=50-t*n.section-t/2;var i=50-t*n.page-t/2;g.style[Brav1Toolbox.getPrefixed("transform")]="translate("+r+"%, "+i+"%) scale("+t/100+", "+t/100+")"}}function vt(e){var t=e.target.tagName;if(t!="INPUT"&&t!="TEXTAREA"&&t!="SELECT"){if(e.keyCode>=37&&e.keyCode<=40){e.preventDefault()}}}function mt(e){var t=e.target.tagName;var n;if(t!="INPUT"&&t!="TEXTAREA"&&t!="SELECT"){e.preventDefault();switch(e.keyCode){case 27:lt(true);break;case 33:Nt();break;case 34:Ct();break;case 35:Tt();break;case 36:xt();break;case 37:bt(e.shiftKey);break;case 39:yt(e.shiftKey);break;case 38:Et(e.shiftKey);break;case 40:wt(e.shiftKey);break;case 13:{if(S){St(R.getCurrentHilited())}break};default:break}}}function gt(){if(D&&C==null){ot()}if(document.location.hash.length>0){Brav1Toolbox.addClass(g,"no-transition");W(null,true);Brav1Toolbox.removeClass(g,"no-transition")}else{if(gt.arguments.length>0){St.apply(this,gt.arguments)}else{St(0,0);at()}}}function yt(e){var t=R.getNextSection(e,k,S);if(t!=undefined){et(t)}else{if(S&&M){ht()}}}function bt(e){var t=R.getPrevSection(e,k,S);if(t!=undefined){et(t)}else{if(S&&M){ht()}}}function wt(e){var t=R.getNextPage(e,S);if(t!=undefined){et(t)}else{if(S&&M){ht()}}}function Et(e){var t=R.getPrevPage(e,S);if(t!=undefined){et(t)}else{if(S&&M){ht()}}}function St(){var e=St.arguments;if(e.length>0){if(e.length==1){if(Brav1Toolbox.typeOf(e[0])==="Object"){var t=e[0];var n=t.section;var i=t.page;if(n!=null&&n!=undefined){var o=document.querySelector(r+"[data-id="+Y(n)+"]");if(i!=null&&i!=undefined){var u=o.querySelector(s+"[data-id="+Y(i)+"]");if(u!=null){et(u);return}}}}else if(e[0].nodeName!=undefined){et(e[0],null,true)}}if(Brav1Toolbox.typeOf(e[0])==="Number"||e[0]===0){var u=R.getPageByIndex(e[1],e[0]);et(u);return}}}function xt(){St(0,0)}function Tt(){var e=R.getSectionsLength()-1;St(e,R.getPages(e).length-1)}function Nt(){var e=R.getPageIndex();St(e.section,0)}function Ct(){var e=R.getPageIndex();St(e.section,R.getPages(e.section).length-1)}function kt(e,t,n){Brav1Toolbox.addListener(document,e,t,n)}function Lt(e){k=e;At(e)}function At(e){L=e}function Ot(e){t=e}function Mt(e){A=e;et()}function _t(e){O=e}function Dt(e){O=!e}function Pt(e){M=e}function Ht(e){_=e}function Bt(t){if(e){D=false}else{D=t}if(D){if(C==null){ot()}at()}else{if(C!=null){ut()}}}function jt(e,t){H=e;B=t==undefined?H:t;R.update()}function Ft(e){P=e}var e="ontouchstart"in document.documentElement;var t=window.history.pushState;var n="ft-section";var r="."+n;var i="ft-page";var s="."+i;var o="ft-fragment";var u="."+o;var a="revealed";var f="revealed-temp";var l="ft-default-progress";var c="."+l;var h="ft-section-thumb";var p="."+h;var d="ft-page-thumb";var v="."+d;var m="flowtimenavigation";var g=document.querySelector(".flowtime");var y=document.querySelector("body");var b=false;var w="";var E={section:0,page:0};var S=false;var x=document.title;var T;var N=22;var C=null;var k=false;var L=true;var A=false;var O=false;var M=false;var _=false;var D=false;var P=false;var H=50;var B=50;var j=document.querySelector(".parallax")!=null;var F=true;try{var I=document.querySelector("html").className.toLowerCase();if(I.indexOf("ie7")!=-1||I.indexOf("ie8")!=-1||I.indexOf("lt-ie9")!=-1){F=false}}catch(q){F=false}if(F){Brav1Toolbox.addClass(y,"ft-absolute-nav")}var R=function(){function x(){t=[];c=[];i=document.querySelectorAll(u);o=[];e=g.querySelectorAll(".flowtime > "+r);n=g.querySelectorAll(".flowtime "+s);for(var a=0;a<e.length;a++){var f=[];var v=e[a];o[a]=[];l[a]=[];if(v.getAttribute("data-id")){v.setAttribute("data-id","__"+Z(v.getAttribute("data-id")))}v.setAttribute("data-prog","__"+(a+1));v.index=a;v.setAttribute("id","");pages=v.querySelectorAll(s);d+=pages.length;p=Math.max(p,pages.length);for(var m=0;m<pages.length;m++){var y=pages[m];if(y.getAttribute("data-id")){y.setAttribute("data-id","__"+Z(y.getAttribute("data-id")))}y.setAttribute("data-prog","__"+(m+1));y.index=m;y.setAttribute("id","");if(!y.getAttribute("data-title")){var b=y.querySelector("h1");if(b!=null&&b.textContent.lenght!=""){y.setAttribute("data-title",b.textContent)}}T(y,a,m);f.push(y);var w=y.querySelectorAll(u);o[a][m]=w;l[a][m]=-1}t.push(f)}h=e.length;it();C()}function T(e,t,n){if(j){if(c[t]==undefined){c[t]=[]}if(c[t][n]==undefined){c[t][n]=[]}var r=e.querySelectorAll(".parallax");if(r.length>0){for(var i=0;i<r.length;i++){var s=r[i];var o=H;var u=B;if(s.getAttribute("data-parallax")!=null){var a=s.getAttribute("data-parallax").split(",");o=u=a[0];if(a.length>1){u=a[1]}}s.pX=o;s.pY=u;c[t][n].push(s)}}}}function N(){return c}function C(){for(var e=0;e<n.length;e++){var t=n[e];t.x=t.offsetLeft+t.parentNode.offsetLeft;t.y=t.offsetTop+t.parentNode.offsetTop}}function k(e,n,r){var i=m;var s=e==!O;if(n==true&&o[v][m].length>0&&l[v][m]<o[v][m].length-1&&s!=true&&r==false){F(v,m)}else{i=0;if(s==true&&v+1<t.length-1){i=0}else if(s!=true||L==true||v+1>t.length-1){i=m}v=Math.min(v+1,t.length-1);return M(t[v],i,r)}return P(t[v][m],r)}function A(e,n,r){var i=m;var s=e==!O;if(n==true&&o[v][m].length>0&&l[v][m]>=0&&s!=true&&r==false){I(v,m)}else{var i=0;i=0;if(s==true&&v-1>=0){i=0}else if(s!=true||L==true||v-1<0){i=m}v=Math.max(v-1,0);return M(t[v],i,r)}return P(t[v][m],r)}function M(e,t,n){var r=e[t];if(r==undefined){for(var i=t;i>=0;i--){if(e[i]!=undefined){r=e[i];t=i;break}}}m=t;if(!S){z()}return P(r,n)}function _(e,n){if(o[v][m].length>0&&l[v][m]<o[v][m].length-1&&e!=true&&n==false){F(v,m)}else{if(t[v][m+1]==undefined&&t[v+1]!=undefined){v+=1;m=0}else{m=Math.min(m+1,t[v].length-1)}}return P(t[v][m],n)}function D(e,n){if(o[v][m].length>0&&l[v][m]>=0&&e!=true&&n==false){I(v,m)}else{if(m==0&&t[v-1]!=undefined){v-=1;m=t[v].length-1}else{m=Math.max(m-1,0)}}return P(t[v][m],n)}function P(e,t){if(t==true){mt(e);return}else{return e}}function F(e,t,n){if(n!=undefined){l[e][t]=n}else{n=l[e][t]+=1}Brav1Toolbox.addClass(o[e][t][n],a)}function I(e,t,n){if(n!=undefined){l[e][t]=n}else{n=l[e][t]}Brav1Toolbox.removeClass(o[e][t][n],a);Brav1Toolbox.removeClass(o[e][t][n],f);l[e][t]-=1}function q(){for(var e=0;e<i.length;e++){Brav1Toolbox.addClass(i[e],f)}}function U(){for(var e=0;e<i.length;e++){Brav1Toolbox.removeClass(i[e],f)}}function z(){for(var e=0;e<o.length;e++){var t=o[e];for(var n=0;n<t.length;n++){var r=t[n];if(r.length>0){if(e>v){for(var i=r.length-1;i>=0;i--){I(e,n,i)}}else if(e<v){for(var i=0;i<r.length;i++){F(e,n,i)}}else if(e==v){if(n>m){for(var i=r.length-1;i>=0;i--){I(e,n,i)}}else if(n<m){for(var i=0;i<r.length;i++){F(e,n,i)}}else if(n==m){for(var i=0;i<r.length;i++){if(L==false){I(e,n,i)}else{if(E.section>R.getPageIndex().section||E.page>R.getPageIndex().page){F(e,n,i)}else{I(e,n,i)}}}if(L==false){l[e][n]=-1}else{if(E.section>R.getPageIndex().section||E.page>R.getPageIndex().page){l[e][n]=i-1}else{l[e][n]=-1}}}}}}}}function W(e){if(e){}return v}function X(e){if(e){}return m}function V(){return e}function $(e){return t[e]}function K(){return n}function Q(){return h}function Y(){return p}function et(){return d}function tt(e){var t=v;var n=m;if(e!=undefined){t=e.parentNode.index;n=e.index}return{section:t,page:n}}function nt(t){return e[t]}function rt(e,n){return t[n][e]}function st(){return e[v]}function ot(){return t[v][m]}function ut(){return o[v][m][at()]}function at(){return l[v][m]}function ft(){return v<e.length-1}function lt(){return v>0}function ct(){return m<t[v].length-1}function ht(){return m>0}function pt(){if(v==0&&m==0){return 0}var e=0;for(var n=0;n<v;n++){e+=t[n].length}e+=t[v][m].index+1;return e}function dt(n){if(n!=undefined){m=tt(n).page;v=tt(n).section}var r="";var i=e[v];r+=G(i);if(t[v].length>1){var s=t[v][m];r+="/"+G(s)}return r}function vt(n){var r=J(n);if(r){var i=r.parentNode;for(var s=0;s<t.length;s++){var o=t[s];if(e[s]===i){v=s;for(var u=0;u<o.length;u++){if(o[u]===r){m=u;break}}}}z()}return r}function mt(e,n){var r=e.parentNode.index;for(var i=0;i<t.length;i++){var s=t[i];for(var o=0;o<s.length;o++){var u=s[o];Brav1Toolbox.removeClass(u,"past-section");Brav1Toolbox.removeClass(u,"future-section");Brav1Toolbox.removeClass(u,"past-page");Brav1Toolbox.removeClass(u,"future-page");if(u!==e){Brav1Toolbox.removeClass(u,"hilite");if(S==false&&u!==ot()){Brav1Toolbox.removeClass(u,"actual")}if(i<r){Brav1Toolbox.addClass(u,"past-section")}else if(i>r){Brav1Toolbox.addClass(u,"future-section")}if(u.index<e.index){Brav1Toolbox.addClass(u,"past-page")}else if(u.index>e.index){Brav1Toolbox.addClass(u,"future-page")}}}}Brav1Toolbox.addClass(e,"hilite");if(n){yt(e)}w=e}function gt(){return w}function yt(e){Brav1Toolbox.addClass(e,"actual")}var e;var t;var n;var i;var o;var l=[];var c=[];var h=0;var p=0;var d=0;var v=0;var m=0;var y=0;var b=0;var w;x();return{update:x,updateFragments:z,showFragments:q,hideFragments:U,getSection:W,getPage:X,getSections:V,getPages:$,getAllPages:K,getNextSection:k,getPrevSection:A,getNextPage:_,getPrevPage:D,getSectionsLength:Q,getPagesLength:Y,getPagesTotalLength:et,getPageIndex:tt,getSectionByIndex:nt,getPageByIndex:rt,getCurrentSection:st,getCurrentPage:ot,getCurrentFragment:ut,getCurrentFragmentIndex:at,getProgress:pt,getHash:dt,setPage:vt,switchActivePage:mt,getCurrentHilited:gt,hasNextSection:ft,hasPrevSection:lt,hasNextPage:ct,hasPrevPage:ht,updateOffsets:C,getParallaxElements:N}}();if(F){Brav1Toolbox.addListener(document,"click",U,false)}if(b==false&&window.history.pushState){window.onpopstate=z}else{b=true}Brav1Toolbox.addListener(window,"hashchange",W);var X=true;Brav1Toolbox.addListener(window,"scroll",V);var $=function(){function n(){r();if(!S){t=setTimeout(i,300)}}function r(){clearTimeout(t)}function i(){R.updateOffsets();et()}var t=NaN;Brav1Toolbox.addListener(window,"resize",n);return{enable:n,disable:r}}();var C=null;var st=null;Brav1Toolbox.addListener(window,"keydown",vt);Brav1Toolbox.addListener(window,"keyup",mt);return{start:gt,updateNavigation:K,nextSection:yt,prevSection:bt,next:wt,prev:Et,nextFragment:wt,prevFragment:Et,gotoPage:St,gotoHome:xt,gotoTop:Nt,gotoBottom:Ct,gotoEnd:Tt,toggleOverview:lt,fragmentsOnSide:Lt,fragmentsOnBack:At,useHistory:Ot,slideInPx:Mt,sectionsSlideToTop:_t,gridNavigation:Dt,useOverviewVariant:Pt,twoStepsSlide:Ht,showProgress:Bt,addEventListener:kt,defaultParallaxValues:jt,parallaxInPx:Ft,getDefaultProgress:ft}}()